{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='result.css') }}">
{% endblock %}

{% block content %}
<h2>Hier is {{ persona.naam or 'je persona' }}!</h2>
<div class="stijl-selector">
    <label for="stijl">Kies een stijl:</label>
    <select id="stijl">
        <option value="default">Standaard</option>
        <option value="stijl1">Stijl 1</option>
        <option value="stijl2">Stijl 2</option>
        <option value="stijl3">Stijl 3</option>
    </select>
</div>
<div class="result-container">
    <div class="result-kaart">
        <!-- Persoonlijke info -->
        <div class="persona-grid">
            <img src="{{ url_for('static', filename=(
    'man.png' if (persona.geslacht or '').lower() == 'man' else
    'vrouw.png' if (persona.geslacht or '').lower() == 'vrouw' else
    'user.png'
)) }}" alt="Persona Afbeelding" class="afbeelding">

            <div class="identiteit">
                <p><strong>Naam:</strong> {{ persona.naam or '' }}</p>
                <p><strong>Geslacht:</strong> {{ persona.geslacht or '' }}</p>
                <p><strong>Leeftijd:</strong> {{ persona.leeftijd or '' }}</p>
            </div>

            <div class="leven">
                <p><strong>School/studie:</strong> {{ persona.school or '' }}</p>
                <p><strong>Werk:</strong> {{ persona.werk or '' }}</p>
            </div>

            <div class="persoonlijkheid">
                <p><strong>Doelen:</strong> {{ (persona.doelen or '')|replace('\n','<br>')|safe }}</p>
                <p><strong>Frustraties:</strong> {{ (persona.frustraties or '')|replace('\n','<br>')|safe }}</p>
                <p><strong>Extravert:</strong> {{ persona.extravert or 3 }}/5</p>
                <p><strong>Creatief:</strong> {{ persona.creatief or 3 }}/5</p>
                <p><strong>Intu√Øtief:</strong> {{ persona.intuitief or 3 }}/5</p>
                <p><strong>Stressgevoelig:</strong> {{ persona.stress or 3 }}/5</p>
            </div>
        </div>

    </div>
</div>

<!-- Knoppen -->
<form method="POST" action="{{ url_for('save_persona') }}" style="display:inline">
    <button type="submit" class="button">Opslaan</button>
</form>

<a href="{{ url_for('stap1') }}" class="button">Bewerken</a>
<a href="{{ url_for('nieuw_persona') }}" class="button">Nieuwe persona</a>
{% endblock %}

{% block extra_js %}
<script>
    const selector = document.getElementById('stijl');

    // Laad opgeslagen stijl
    window.addEventListener('load', () => {
        const savedStyle = localStorage.getItem('stijl') || 'default';
        document.body.className = savedStyle;
        selector.value = savedStyle;
    });

    // Pas stijl aan bij verandering
    selector.addEventListener('change', () => {
        const stijl = selector.value;
        document.body.className = stijl;
        localStorage.setItem('stijl', stijl);
    });
</script>
{% endblock %}